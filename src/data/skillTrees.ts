import type { GladiatorClass } from '@/types';

export interface Skill {
  id: string;
  name: string;
  description: string;
  branch: 'offense' | 'defense' | 'utility';
  tier: 1 | 2 | 3 | 4 | 5;
  prerequisite?: string; // ID of prerequisite skill
  effects: SkillEffect[];
  icon: string;
}

export interface SkillEffect {
  stat: string;
  value: number;
  isPercentage: boolean;
  condition?: string; // e.g., "when below 30% HP"
}

export interface SkillTree {
  classId: GladiatorClass;
  branches: {
    offense: Skill[];
    defense: Skill[];
    utility: Skill[];
  };
}

// Generic skills available to all classes
export const UNIVERSAL_SKILLS: Skill[] = [
  // Offense Branch
  {
    id: 'universal_power_strike',
    name: 'Power Strike',
    description: 'Channel strength into devastating blows',
    branch: 'offense',
    tier: 1,
    effects: [{ stat: 'damage', value: 5, isPercentage: true }],
    icon: 'ğŸ’¥',
  },
  {
    id: 'universal_precise_aim',
    name: 'Precise Aim',
    description: 'Target weak points in enemy armor',
    branch: 'offense',
    tier: 2,
    prerequisite: 'universal_power_strike',
    effects: [{ stat: 'armorPenetration', value: 10, isPercentage: true }],
    icon: 'ğŸ¯',
  },
  {
    id: 'universal_berserker_rage',
    name: 'Berserker Rage',
    description: 'Deal more damage when wounded',
    branch: 'offense',
    tier: 3,
    prerequisite: 'universal_precise_aim',
    effects: [{ stat: 'damage', value: 20, isPercentage: true, condition: 'when below 30% HP' }],
    icon: 'ğŸ”¥',
  },
  // Defense Branch
  {
    id: 'universal_iron_skin',
    name: 'Iron Skin',
    description: 'Hardened body reduces incoming damage',
    branch: 'defense',
    tier: 1,
    effects: [{ stat: 'damageReduction', value: 5, isPercentage: true }],
    icon: 'ğŸ›¡ï¸',
  },
  {
    id: 'universal_quick_recovery',
    name: 'Quick Recovery',
    description: 'Recover faster between fights',
    branch: 'defense',
    tier: 2,
    prerequisite: 'universal_iron_skin',
    effects: [{ stat: 'healingRate', value: 15, isPercentage: true }],
    icon: 'ğŸ’š',
  },
  {
    id: 'universal_second_wind',
    name: 'Second Wind',
    description: 'Regain stamina when critically wounded',
    branch: 'defense',
    tier: 3,
    prerequisite: 'universal_quick_recovery',
    effects: [{ stat: 'staminaRecovery', value: 30, isPercentage: false, condition: 'once per fight when below 20% HP' }],
    icon: 'ğŸŒ¬ï¸',
  },
  // Utility Branch
  {
    id: 'universal_crowd_pleaser',
    name: 'Crowd Pleaser',
    description: 'Gain more fame from victories',
    branch: 'utility',
    tier: 1,
    effects: [{ stat: 'fameGain', value: 10, isPercentage: true }],
    icon: 'ğŸ‘',
  },
  {
    id: 'universal_veteran_presence',
    name: 'Veteran Presence',
    description: 'Intimidate opponents, reducing their morale',
    branch: 'utility',
    tier: 2,
    prerequisite: 'universal_crowd_pleaser',
    effects: [{ stat: 'enemyMorale', value: -10, isPercentage: true }],
    icon: 'ğŸ˜¤',
  },
  {
    id: 'universal_death_defying',
    name: 'Death Defying',
    description: 'Increased chance to survive fatal blow',
    branch: 'utility',
    tier: 3,
    prerequisite: 'universal_veteran_presence',
    effects: [{ stat: 'survivalChance', value: 15, isPercentage: true }],
    icon: 'ğŸ’€',
  },
];

// Class-specific skill trees
export const CLASS_SKILL_TREES: Record<GladiatorClass, SkillTree> = {
  murmillo: {
    classId: 'murmillo',
    branches: {
      offense: [
        {
          id: 'murmillo_gladius_mastery',
          name: 'Gladius Mastery',
          description: 'Master the short sword for quick, lethal strikes',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'attackSpeed', value: 10, isPercentage: true }],
          icon: 'âš”ï¸',
        },
        {
          id: 'murmillo_shield_bash',
          name: 'Shield Bash',
          description: 'Use scutum to stun enemies',
          branch: 'offense',
          tier: 2,
          prerequisite: 'murmillo_gladius_mastery',
          effects: [{ stat: 'stunChance', value: 15, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'murmillo_legionary_combo',
          name: 'Legionary Combo',
          description: 'Chain attacks like a trained soldier',
          branch: 'offense',
          tier: 3,
          prerequisite: 'murmillo_shield_bash',
          effects: [
            { stat: 'comboChance', value: 25, isPercentage: true },
            { stat: 'comboDamage', value: 50, isPercentage: true },
          ],
          icon: 'âš¡',
        },
        {
          id: 'murmillo_executioner',
          name: 'Executioner',
          description: 'Finishing blows deal massive damage',
          branch: 'offense',
          tier: 4,
          prerequisite: 'murmillo_legionary_combo',
          effects: [{ stat: 'executeDamage', value: 100, isPercentage: true, condition: 'against enemies below 20% HP' }],
          icon: 'ğŸ’€',
        },
        {
          id: 'murmillo_fish_scale_fury',
          name: 'Fish Scale Fury',
          description: 'Ultimate: Rapid successive strikes',
          branch: 'offense',
          tier: 5,
          prerequisite: 'murmillo_executioner',
          effects: [
            { stat: 'multiStrike', value: 3, isPercentage: false },
            { stat: 'damage', value: 30, isPercentage: true },
          ],
          icon: 'ğŸŸ',
        },
      ],
      defense: [
        {
          id: 'murmillo_scutum_wall',
          name: 'Scutum Wall',
          description: 'Large shield provides superior protection',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'blockChance', value: 20, isPercentage: true }],
          icon: 'ğŸ°',
        },
        {
          id: 'murmillo_formation_fighter',
          name: 'Formation Fighter',
          description: 'Trained in legion tactics for group fights',
          branch: 'defense',
          tier: 2,
          prerequisite: 'murmillo_scutum_wall',
          effects: [{ stat: 'damageReduction', value: 15, isPercentage: true, condition: 'in team fights' }],
          icon: 'ğŸ‘¥',
        },
        {
          id: 'murmillo_counter_stance',
          name: 'Counter Stance',
          description: 'Riposte after successful blocks',
          branch: 'defense',
          tier: 3,
          prerequisite: 'murmillo_formation_fighter',
          effects: [{ stat: 'counterAttackChance', value: 30, isPercentage: true }],
          icon: 'â†©ï¸',
        },
        {
          id: 'murmillo_immovable',
          name: 'Immovable',
          description: 'Cannot be knocked down or pushed',
          branch: 'defense',
          tier: 4,
          prerequisite: 'murmillo_counter_stance',
          effects: [{ stat: 'knockdownImmunity', value: 100, isPercentage: true }],
          icon: 'â›°ï¸',
        },
        {
          id: 'murmillo_phalanx',
          name: 'Phalanx',
          description: 'Ultimate: Impenetrable defense stance',
          branch: 'defense',
          tier: 5,
          prerequisite: 'murmillo_immovable',
          effects: [
            { stat: 'blockChance', value: 50, isPercentage: true },
            { stat: 'damageReduction', value: 30, isPercentage: true },
          ],
          icon: 'ğŸ›ï¸',
        },
      ],
      utility: [
        {
          id: 'murmillo_roman_discipline',
          name: 'Roman Discipline',
          description: 'Military training improves obedience',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'obedience', value: 15, isPercentage: false }],
          icon: 'ğŸ¦…',
        },
        {
          id: 'murmillo_crowd_favorite',
          name: 'Crowd Favorite',
          description: 'Roman soldiers are beloved by the people',
          branch: 'utility',
          tier: 2,
          prerequisite: 'murmillo_roman_discipline',
          effects: [{ stat: 'fameGain', value: 20, isPercentage: true }],
          icon: 'â¤ï¸',
        },
        {
          id: 'murmillo_tactical_mind',
          name: 'Tactical Mind',
          description: 'Plan attacks for maximum effect',
          branch: 'utility',
          tier: 3,
          prerequisite: 'murmillo_crowd_favorite',
          effects: [{ stat: 'critChance', value: 10, isPercentage: true }],
          icon: 'ğŸ§ ',
        },
        {
          id: 'murmillo_veteran_soldier',
          name: 'Veteran Soldier',
          description: 'Experience reduces stamina costs',
          branch: 'utility',
          tier: 4,
          prerequisite: 'murmillo_tactical_mind',
          effects: [{ stat: 'staminaCost', value: -20, isPercentage: true }],
          icon: 'ğŸ–ï¸',
        },
        {
          id: 'murmillo_champions_glory',
          name: "Champion's Glory",
          description: 'Ultimate: All stats boosted by fame',
          branch: 'utility',
          tier: 5,
          prerequisite: 'murmillo_veteran_soldier',
          effects: [{ stat: 'allStats', value: 1, isPercentage: true, condition: 'per 100 fame' }],
          icon: 'ğŸ‘‘',
        },
      ],
    },
  },

  retiarius: {
    classId: 'retiarius',
    branches: {
      offense: [
        {
          id: 'retiarius_net_mastery',
          name: 'Net Mastery',
          description: 'Expert net throwing for ensnaring foes',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'netAccuracy', value: 20, isPercentage: true }],
          icon: 'ğŸ•¸ï¸',
        },
        {
          id: 'retiarius_trident_thrust',
          name: 'Trident Thrust',
          description: 'Long reach attacks from safe distance',
          branch: 'offense',
          tier: 2,
          prerequisite: 'retiarius_net_mastery',
          effects: [{ stat: 'attackRange', value: 1, isPercentage: false }],
          icon: 'ğŸ”±',
        },
        {
          id: 'retiarius_entangle',
          name: 'Entangle',
          description: 'Trapped enemies take more damage',
          branch: 'offense',
          tier: 3,
          prerequisite: 'retiarius_trident_thrust',
          effects: [{ stat: 'damage', value: 40, isPercentage: true, condition: 'against netted enemies' }],
          icon: 'ğŸª¤',
        },
        {
          id: 'retiarius_drag_down',
          name: 'Drag Down',
          description: 'Pull netted enemies to the ground',
          branch: 'offense',
          tier: 4,
          prerequisite: 'retiarius_entangle',
          effects: [{ stat: 'knockdownChance', value: 50, isPercentage: true, condition: 'against netted enemies' }],
          icon: 'â¬‡ï¸',
        },
        {
          id: 'retiarius_neptunes_wrath',
          name: "Neptune's Wrath",
          description: 'Ultimate: Devastating trident combo',
          branch: 'offense',
          tier: 5,
          prerequisite: 'retiarius_drag_down',
          effects: [
            { stat: 'damage', value: 80, isPercentage: true },
            { stat: 'bleedChance', value: 100, isPercentage: true },
          ],
          icon: 'ğŸŒŠ',
        },
      ],
      defense: [
        {
          id: 'retiarius_evasive_footwork',
          name: 'Evasive Footwork',
          description: 'Dance around heavier opponents',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'evasion', value: 15, isPercentage: true }],
          icon: 'ğŸ’¨',
        },
        {
          id: 'retiarius_shoulder_guard',
          name: 'Shoulder Guard',
          description: 'Galerus protects vital areas',
          branch: 'defense',
          tier: 2,
          prerequisite: 'retiarius_evasive_footwork',
          effects: [{ stat: 'critResistance', value: 25, isPercentage: true }],
          icon: 'ğŸ¦¾',
        },
        {
          id: 'retiarius_distance_keeper',
          name: 'Distance Keeper',
          description: 'Maintain safe distance from enemies',
          branch: 'defense',
          tier: 3,
          prerequisite: 'retiarius_shoulder_guard',
          effects: [{ stat: 'meleeEvasion', value: 20, isPercentage: true }],
          icon: 'ğŸ“',
        },
        {
          id: 'retiarius_slippery',
          name: 'Slippery',
          description: 'Escape from grapples and holds',
          branch: 'defense',
          tier: 4,
          prerequisite: 'retiarius_distance_keeper',
          effects: [{ stat: 'grappleEscape', value: 50, isPercentage: true }],
          icon: 'ğŸ',
        },
        {
          id: 'retiarius_fishermans_instinct',
          name: "Fisherman's Instinct",
          description: 'Ultimate: Predict and dodge attacks',
          branch: 'defense',
          tier: 5,
          prerequisite: 'retiarius_slippery',
          effects: [{ stat: 'evasion', value: 40, isPercentage: true }],
          icon: 'ğŸ ',
        },
      ],
      utility: [
        {
          id: 'retiarius_showman',
          name: 'Showman',
          description: 'Flashy style entertains the crowd',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'fameGain', value: 25, isPercentage: true }],
          icon: 'ğŸ­',
        },
        {
          id: 'retiarius_sea_hunter',
          name: 'Sea Hunter',
          description: 'Patient waiting for the perfect strike',
          branch: 'utility',
          tier: 2,
          prerequisite: 'retiarius_showman',
          effects: [{ stat: 'critChance', value: 15, isPercentage: true }],
          icon: 'ğŸ¦ˆ',
        },
        {
          id: 'retiarius_nimble_recovery',
          name: 'Nimble Recovery',
          description: 'Light equipment allows fast recovery',
          branch: 'utility',
          tier: 3,
          prerequisite: 'retiarius_sea_hunter',
          effects: [{ stat: 'staminaRegen', value: 25, isPercentage: true }],
          icon: 'âš¡',
        },
        {
          id: 'retiarius_net_weaver',
          name: 'Net Weaver',
          description: 'Quickly repair and reuse nets',
          branch: 'utility',
          tier: 4,
          prerequisite: 'retiarius_nimble_recovery',
          effects: [{ stat: 'netUses', value: 2, isPercentage: false }],
          icon: 'ğŸ§µ',
        },
        {
          id: 'retiarius_poseidons_blessing',
          name: "Poseidon's Blessing",
          description: 'Ultimate: Divine protection from the sea god',
          branch: 'utility',
          tier: 5,
          prerequisite: 'retiarius_net_weaver',
          effects: [
            { stat: 'survivalChance', value: 25, isPercentage: true },
            { stat: 'allStats', value: 10, isPercentage: true },
          ],
          icon: 'ğŸ”±',
        },
      ],
    },
  },

  thraex: {
    classId: 'thraex',
    branches: {
      offense: [
        {
          id: 'thraex_sica_slash',
          name: 'Sica Slash',
          description: 'Curved blade hooks around shields',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'shieldBypass', value: 20, isPercentage: true }],
          icon: 'ğŸ—¡ï¸',
        },
        {
          id: 'thraex_aggressive_stance',
          name: 'Aggressive Stance',
          description: 'Trade defense for offense',
          branch: 'offense',
          tier: 2,
          prerequisite: 'thraex_sica_slash',
          effects: [
            { stat: 'damage', value: 25, isPercentage: true },
            { stat: 'damageReduction', value: -10, isPercentage: true },
          ],
          icon: 'ğŸ˜¤',
        },
        {
          id: 'thraex_leg_attack',
          name: 'Leg Attack',
          description: 'Target unprotected legs',
          branch: 'offense',
          tier: 3,
          prerequisite: 'thraex_aggressive_stance',
          effects: [{ stat: 'slowChance', value: 30, isPercentage: true }],
          icon: 'ğŸ¦µ',
        },
        {
          id: 'thraex_blood_frenzy',
          name: 'Blood Frenzy',
          description: 'Each hit increases damage',
          branch: 'offense',
          tier: 4,
          prerequisite: 'thraex_leg_attack',
          effects: [{ stat: 'stackingDamage', value: 5, isPercentage: true, condition: 'per consecutive hit' }],
          icon: 'ğŸ©¸',
        },
        {
          id: 'thraex_thracian_fury',
          name: 'Thracian Fury',
          description: 'Ultimate: Unstoppable assault',
          branch: 'offense',
          tier: 5,
          prerequisite: 'thraex_blood_frenzy',
          effects: [
            { stat: 'attackSpeed', value: 50, isPercentage: true },
            { stat: 'damage', value: 40, isPercentage: true },
          ],
          icon: 'âš”ï¸',
        },
      ],
      defense: [
        {
          id: 'thraex_parmula_parry',
          name: 'Parmula Parry',
          description: 'Small shield for quick parries',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'parryChance', value: 15, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'thraex_greaves_protection',
          name: 'Greaves Protection',
          description: 'High greaves protect legs',
          branch: 'defense',
          tier: 2,
          prerequisite: 'thraex_parmula_parry',
          effects: [{ stat: 'legDamageReduction', value: 40, isPercentage: true }],
          icon: 'ğŸ¦¿',
        },
        {
          id: 'thraex_barbaric_resilience',
          name: 'Barbaric Resilience',
          description: 'Thracian toughness endures pain',
          branch: 'defense',
          tier: 3,
          prerequisite: 'thraex_greaves_protection',
          effects: [{ stat: 'painResistance', value: 25, isPercentage: true }],
          icon: 'ğŸ’ª',
        },
        {
          id: 'thraex_battle_hardened',
          name: 'Battle Hardened',
          description: 'Wounds heal faster from experience',
          branch: 'defense',
          tier: 4,
          prerequisite: 'thraex_barbaric_resilience',
          effects: [{ stat: 'healingRate', value: 30, isPercentage: true }],
          icon: 'ğŸ©¹',
        },
        {
          id: 'thraex_unstoppable',
          name: 'Unstoppable',
          description: 'Ultimate: Continue fighting while wounded',
          branch: 'defense',
          tier: 5,
          prerequisite: 'thraex_battle_hardened',
          effects: [{ stat: 'fightOnChance', value: 50, isPercentage: true, condition: 'when receiving fatal blow' }],
          icon: 'ğŸ”¥',
        },
      ],
      utility: [
        {
          id: 'thraex_wild_spirit',
          name: 'Wild Spirit',
          description: 'Untamed nature resists control',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'fearResistance', value: 30, isPercentage: true }],
          icon: 'ğŸº',
        },
        {
          id: 'thraex_mountain_endurance',
          name: 'Mountain Endurance',
          description: 'Thracian highlands build stamina',
          branch: 'utility',
          tier: 2,
          prerequisite: 'thraex_wild_spirit',
          effects: [{ stat: 'maxStamina', value: 20, isPercentage: true }],
          icon: 'ğŸ”ï¸',
        },
        {
          id: 'thraex_guerrilla_tactics',
          name: 'Guerrilla Tactics',
          description: 'Strike and retreat effectively',
          branch: 'utility',
          tier: 3,
          prerequisite: 'thraex_mountain_endurance',
          effects: [{ stat: 'disengageChance', value: 40, isPercentage: true }],
          icon: 'ğŸ¯',
        },
        {
          id: 'thraex_war_cry',
          name: 'War Cry',
          description: 'Intimidating shout weakens foes',
          branch: 'utility',
          tier: 4,
          prerequisite: 'thraex_guerrilla_tactics',
          effects: [{ stat: 'enemyDamage', value: -15, isPercentage: true }],
          icon: 'ğŸ“¢',
        },
        {
          id: 'thraex_spirit_of_ares',
          name: 'Spirit of Ares',
          description: 'Ultimate: Channel the god of war',
          branch: 'utility',
          tier: 5,
          prerequisite: 'thraex_war_cry',
          effects: [
            { stat: 'allStats', value: 15, isPercentage: true },
            { stat: 'fameGain', value: 30, isPercentage: true },
          ],
          icon: 'âš”ï¸',
        },
      ],
    },
  },

  secutor: {
    classId: 'secutor',
    branches: {
      offense: [
        {
          id: 'secutor_relentless_pursuit',
          name: 'Relentless Pursuit',
          description: 'Never let prey escape',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'movementSpeed', value: 15, isPercentage: true }],
          icon: 'ğŸƒ',
        },
        {
          id: 'secutor_closing_strike',
          name: 'Closing Strike',
          description: 'Powerful attack when closing distance',
          branch: 'offense',
          tier: 2,
          prerequisite: 'secutor_relentless_pursuit',
          effects: [{ stat: 'chargeDamage', value: 30, isPercentage: true }],
          icon: 'âš¡',
        },
        {
          id: 'secutor_net_cutter',
          name: 'Net Cutter',
          description: 'Resist and destroy nets',
          branch: 'offense',
          tier: 3,
          prerequisite: 'secutor_closing_strike',
          effects: [{ stat: 'netResistance', value: 50, isPercentage: true }],
          icon: 'âœ‚ï¸',
        },
        {
          id: 'secutor_fish_hunter',
          name: 'Fish Hunter',
          description: 'Bonus damage against Retiarii',
          branch: 'offense',
          tier: 4,
          prerequisite: 'secutor_net_cutter',
          effects: [{ stat: 'damage', value: 25, isPercentage: true, condition: 'against Retiarius' }],
          icon: 'ğŸ£',
        },
        {
          id: 'secutor_inevitable_doom',
          name: 'Inevitable Doom',
          description: 'Ultimate: Unstoppable charge attack',
          branch: 'offense',
          tier: 5,
          prerequisite: 'secutor_fish_hunter',
          effects: [
            { stat: 'chargeDamage', value: 100, isPercentage: true },
            { stat: 'stunChance', value: 50, isPercentage: true },
          ],
          icon: 'ğŸ’€',
        },
      ],
      defense: [
        {
          id: 'secutor_smooth_helm',
          name: 'Smooth Helm',
          description: 'Rounded helmet deflects net throws',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'netEvasion', value: 30, isPercentage: true }],
          icon: 'ğŸª–',
        },
        {
          id: 'secutor_armored_advance',
          name: 'Armored Advance',
          description: 'Heavy armor allows fearless approach',
          branch: 'defense',
          tier: 2,
          prerequisite: 'secutor_smooth_helm',
          effects: [{ stat: 'damageReduction', value: 15, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'secutor_shield_wall',
          name: 'Shield Wall',
          description: 'Large shield blocks projectiles',
          branch: 'defense',
          tier: 3,
          prerequisite: 'secutor_armored_advance',
          effects: [{ stat: 'rangedBlockChance', value: 40, isPercentage: true }],
          icon: 'ğŸ°',
        },
        {
          id: 'secutor_tireless',
          name: 'Tireless',
          description: 'Armor training reduces fatigue',
          branch: 'defense',
          tier: 4,
          prerequisite: 'secutor_shield_wall',
          effects: [{ stat: 'fatigueReduction', value: 25, isPercentage: true }],
          icon: 'ğŸ”‹',
        },
        {
          id: 'secutor_impenetrable',
          name: 'Impenetrable',
          description: 'Ultimate: Become nearly invulnerable',
          branch: 'defense',
          tier: 5,
          prerequisite: 'secutor_tireless',
          effects: [
            { stat: 'damageReduction', value: 40, isPercentage: true },
            { stat: 'maxHP', value: 20, isPercentage: true },
          ],
          icon: 'ğŸ›ï¸',
        },
      ],
      utility: [
        {
          id: 'secutor_patient_hunter',
          name: 'Patient Hunter',
          description: 'Wait for the right moment to strike',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'critChance', value: 10, isPercentage: true }],
          icon: 'ğŸ¯',
        },
        {
          id: 'secutor_strategic_approach',
          name: 'Strategic Approach',
          description: 'Plan attacks during pursuit',
          branch: 'utility',
          tier: 2,
          prerequisite: 'secutor_patient_hunter',
          effects: [{ stat: 'accuracy', value: 15, isPercentage: true }],
          icon: 'ğŸ§ ',
        },
        {
          id: 'secutor_intimidating_presence',
          name: 'Intimidating Presence',
          description: 'Heavy armor intimidates foes',
          branch: 'utility',
          tier: 3,
          prerequisite: 'secutor_strategic_approach',
          effects: [{ stat: 'enemyMorale', value: -20, isPercentage: true }],
          icon: 'ğŸ˜¨',
        },
        {
          id: 'secutor_crowd_champion',
          name: 'Crowd Champion',
          description: 'Dramatic pursuits entertain crowds',
          branch: 'utility',
          tier: 4,
          prerequisite: 'secutor_intimidating_presence',
          effects: [{ stat: 'fameGain', value: 20, isPercentage: true }],
          icon: 'ğŸ†',
        },
        {
          id: 'secutor_masters_blessing',
          name: "Master's Blessing",
          description: 'Ultimate: Lanista favors your victories',
          branch: 'utility',
          tier: 5,
          prerequisite: 'secutor_crowd_champion',
          effects: [
            { stat: 'goldBonus', value: 30, isPercentage: true },
            { stat: 'experienceGain', value: 25, isPercentage: true },
          ],
          icon: 'ğŸ‘‘',
        },
      ],
    },
  },

  hoplomachus: {
    classId: 'hoplomachus',
    branches: {
      offense: [
        {
          id: 'hoplomachus_spear_thrust',
          name: 'Spear Thrust',
          description: 'Long spear keeps enemies at bay',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'attackRange', value: 1, isPercentage: false }],
          icon: 'ğŸ”±',
        },
        {
          id: 'hoplomachus_dagger_finisher',
          name: 'Dagger Finisher',
          description: 'Close range pugio for killing blows',
          branch: 'offense',
          tier: 2,
          prerequisite: 'hoplomachus_spear_thrust',
          effects: [{ stat: 'executeDamage', value: 50, isPercentage: true, condition: 'against enemies below 30% HP' }],
          icon: 'ğŸ—¡ï¸',
        },
        {
          id: 'hoplomachus_phalanx_strike',
          name: 'Phalanx Strike',
          description: 'Greek formation fighting technique',
          branch: 'offense',
          tier: 3,
          prerequisite: 'hoplomachus_dagger_finisher',
          effects: [{ stat: 'armorPenetration', value: 25, isPercentage: true }],
          icon: 'ğŸ›ï¸',
        },
        {
          id: 'hoplomachus_spartan_discipline',
          name: 'Spartan Discipline',
          description: 'Never miss a strike',
          branch: 'offense',
          tier: 4,
          prerequisite: 'hoplomachus_phalanx_strike',
          effects: [{ stat: 'accuracy', value: 30, isPercentage: true }],
          icon: 'ğŸ¯',
        },
        {
          id: 'hoplomachus_hoplite_legacy',
          name: 'Hoplite Legacy',
          description: 'Ultimate: Fighting style of ancient warriors',
          branch: 'offense',
          tier: 5,
          prerequisite: 'hoplomachus_spartan_discipline',
          effects: [
            { stat: 'damage', value: 35, isPercentage: true },
            { stat: 'critChance', value: 20, isPercentage: true },
          ],
          icon: 'âš”ï¸',
        },
      ],
      defense: [
        {
          id: 'hoplomachus_bronze_shield',
          name: 'Bronze Shield',
          description: 'Small but sturdy hoplon shield',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'blockChance', value: 15, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'hoplomachus_quilted_armor',
          name: 'Quilted Armor',
          description: 'Padded armor absorbs blows',
          branch: 'defense',
          tier: 2,
          prerequisite: 'hoplomachus_bronze_shield',
          effects: [{ stat: 'damageReduction', value: 10, isPercentage: true }],
          icon: 'ğŸ§¥',
        },
        {
          id: 'hoplomachus_high_crest',
          name: 'High Crest',
          description: 'Impressive helmet intimidates foes',
          branch: 'defense',
          tier: 3,
          prerequisite: 'hoplomachus_quilted_armor',
          effects: [{ stat: 'headProtection', value: 30, isPercentage: true }],
          icon: 'ğŸª–',
        },
        {
          id: 'hoplomachus_defensive_stance',
          name: 'Defensive Stance',
          description: 'Greek defensive posture',
          branch: 'defense',
          tier: 4,
          prerequisite: 'hoplomachus_high_crest',
          effects: [{ stat: 'parryChance', value: 25, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'hoplomachus_athenas_aegis',
          name: "Athena's Aegis",
          description: 'Ultimate: Divine protection',
          branch: 'defense',
          tier: 5,
          prerequisite: 'hoplomachus_defensive_stance',
          effects: [
            { stat: 'blockChance', value: 35, isPercentage: true },
            { stat: 'counterAttackChance', value: 25, isPercentage: true },
          ],
          icon: 'ğŸ¦‰',
        },
      ],
      utility: [
        {
          id: 'hoplomachus_greek_training',
          name: 'Greek Training',
          description: 'Classical education improves learning',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'experienceGain', value: 15, isPercentage: true }],
          icon: 'ğŸ“š',
        },
        {
          id: 'hoplomachus_olympic_athlete',
          name: 'Olympic Athlete',
          description: 'Athletic training builds stamina',
          branch: 'utility',
          tier: 2,
          prerequisite: 'hoplomachus_greek_training',
          effects: [{ stat: 'maxStamina', value: 15, isPercentage: true }],
          icon: 'ğŸƒ',
        },
        {
          id: 'hoplomachus_tactical_retreat',
          name: 'Tactical Retreat',
          description: 'Know when to withdraw safely',
          branch: 'utility',
          tier: 3,
          prerequisite: 'hoplomachus_olympic_athlete',
          effects: [{ stat: 'survivalChance', value: 20, isPercentage: true }],
          icon: 'ğŸƒ',
        },
        {
          id: 'hoplomachus_exotic_appeal',
          name: 'Exotic Appeal',
          description: 'Greek fighters are popular',
          branch: 'utility',
          tier: 4,
          prerequisite: 'hoplomachus_tactical_retreat',
          effects: [{ stat: 'fameGain', value: 20, isPercentage: true }],
          icon: 'ğŸŒŸ',
        },
        {
          id: 'hoplomachus_hero_of_hellas',
          name: 'Hero of Hellas',
          description: 'Ultimate: Legendary Greek warrior',
          branch: 'utility',
          tier: 5,
          prerequisite: 'hoplomachus_exotic_appeal',
          effects: [
            { stat: 'allStats', value: 10, isPercentage: true },
            { stat: 'fameGain', value: 40, isPercentage: true },
          ],
          icon: 'ğŸ›ï¸',
        },
      ],
    },
  },

  dimachaerus: {
    classId: 'dimachaerus',
    branches: {
      offense: [
        {
          id: 'dimachaerus_dual_wield',
          name: 'Dual Wield',
          description: 'Fight with two swords effectively',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'attackSpeed', value: 20, isPercentage: true }],
          icon: 'âš”ï¸',
        },
        {
          id: 'dimachaerus_flurry',
          name: 'Flurry',
          description: 'Rapid successive attacks',
          branch: 'offense',
          tier: 2,
          prerequisite: 'dimachaerus_dual_wield',
          effects: [{ stat: 'multiAttackChance', value: 25, isPercentage: true }],
          icon: 'ğŸŒªï¸',
        },
        {
          id: 'dimachaerus_cross_slash',
          name: 'Cross Slash',
          description: 'Devastating dual blade attack',
          branch: 'offense',
          tier: 3,
          prerequisite: 'dimachaerus_flurry',
          effects: [{ stat: 'damage', value: 30, isPercentage: true }],
          icon: 'âœ–ï¸',
        },
        {
          id: 'dimachaerus_whirlwind',
          name: 'Whirlwind',
          description: 'Spin attack hits all nearby enemies',
          branch: 'offense',
          tier: 4,
          prerequisite: 'dimachaerus_cross_slash',
          effects: [{ stat: 'aoeChance', value: 40, isPercentage: true }],
          icon: 'ğŸŒ€',
        },
        {
          id: 'dimachaerus_blade_dance',
          name: 'Blade Dance',
          description: 'Ultimate: Hypnotic deadly dance',
          branch: 'offense',
          tier: 5,
          prerequisite: 'dimachaerus_whirlwind',
          effects: [
            { stat: 'attackSpeed', value: 50, isPercentage: true },
            { stat: 'damage', value: 40, isPercentage: true },
            { stat: 'evasion', value: 20, isPercentage: true },
          ],
          icon: 'ğŸ’ƒ',
        },
      ],
      defense: [
        {
          id: 'dimachaerus_blade_parry',
          name: 'Blade Parry',
          description: 'Use off-hand sword for defense',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'parryChance', value: 20, isPercentage: true }],
          icon: 'ğŸ—¡ï¸',
        },
        {
          id: 'dimachaerus_deflection',
          name: 'Deflection',
          description: 'Redirect enemy attacks',
          branch: 'defense',
          tier: 2,
          prerequisite: 'dimachaerus_blade_parry',
          effects: [{ stat: 'deflectChance', value: 15, isPercentage: true }],
          icon: 'â†©ï¸',
        },
        {
          id: 'dimachaerus_acrobatic',
          name: 'Acrobatic',
          description: 'Agile movement avoids damage',
          branch: 'defense',
          tier: 3,
          prerequisite: 'dimachaerus_deflection',
          effects: [{ stat: 'evasion', value: 20, isPercentage: true }],
          icon: 'ğŸ¤¸',
        },
        {
          id: 'dimachaerus_blur',
          name: 'Blur',
          description: 'Move so fast enemies struggle to hit',
          branch: 'defense',
          tier: 4,
          prerequisite: 'dimachaerus_acrobatic',
          effects: [{ stat: 'missChance', value: 25, isPercentage: true }],
          icon: 'ğŸ’¨',
        },
        {
          id: 'dimachaerus_untouchable',
          name: 'Untouchable',
          description: 'Ultimate: Near-impossible to hit',
          branch: 'defense',
          tier: 5,
          prerequisite: 'dimachaerus_blur',
          effects: [{ stat: 'evasion', value: 50, isPercentage: true }],
          icon: 'ğŸ‘»',
        },
      ],
      utility: [
        {
          id: 'dimachaerus_ambidextrous',
          name: 'Ambidextrous',
          description: 'Equal skill with both hands',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'offHandDamage', value: 30, isPercentage: true }],
          icon: 'ğŸ¤²',
        },
        {
          id: 'dimachaerus_weapon_juggler',
          name: 'Weapon Juggler',
          description: 'Flashy moves entertain crowds',
          branch: 'utility',
          tier: 2,
          prerequisite: 'dimachaerus_ambidextrous',
          effects: [{ stat: 'fameGain', value: 30, isPercentage: true }],
          icon: 'ğŸ¤¹',
        },
        {
          id: 'dimachaerus_fluid_combat',
          name: 'Fluid Combat',
          description: 'Seamless attack and defense',
          branch: 'utility',
          tier: 3,
          prerequisite: 'dimachaerus_weapon_juggler',
          effects: [{ stat: 'staminaCost', value: -20, isPercentage: true }],
          icon: 'ğŸŒŠ',
        },
        {
          id: 'dimachaerus_perfect_balance',
          name: 'Perfect Balance',
          description: 'Cannot be knocked off balance',
          branch: 'utility',
          tier: 4,
          prerequisite: 'dimachaerus_fluid_combat',
          effects: [{ stat: 'balanceImmunity', value: 100, isPercentage: true }],
          icon: 'âš–ï¸',
        },
        {
          id: 'dimachaerus_twin_souls',
          name: 'Twin Souls',
          description: 'Ultimate: One mind, two blades',
          branch: 'utility',
          tier: 5,
          prerequisite: 'dimachaerus_perfect_balance',
          effects: [
            { stat: 'allStats', value: 15, isPercentage: true },
            { stat: 'offHandDamage', value: 100, isPercentage: true },
          ],
          icon: 'ğŸ‘¯',
        },
      ],
    },
  },

  samnite: {
    classId: 'samnite',
    branches: {
      offense: [
        {
          id: 'samnite_sword_mastery',
          name: 'Sword Mastery',
          description: 'Traditional Samnite sword technique',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'damage', value: 15, isPercentage: true }],
          icon: 'âš”ï¸',
        },
        {
          id: 'samnite_heavy_strike',
          name: 'Heavy Strike',
          description: 'Powerful overhead attack',
          branch: 'offense',
          tier: 2,
          prerequisite: 'samnite_sword_mastery',
          effects: [{ stat: 'critDamage', value: 30, isPercentage: true }],
          icon: 'ğŸ’¥',
        },
        {
          id: 'samnite_shield_slam',
          name: 'Shield Slam',
          description: 'Use large shield offensively',
          branch: 'offense',
          tier: 3,
          prerequisite: 'samnite_heavy_strike',
          effects: [{ stat: 'stunChance', value: 25, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'samnite_warrior_tradition',
          name: 'Warrior Tradition',
          description: 'Ancient combat knowledge',
          branch: 'offense',
          tier: 4,
          prerequisite: 'samnite_shield_slam',
          effects: [
            { stat: 'damage', value: 20, isPercentage: true },
            { stat: 'accuracy', value: 15, isPercentage: true },
          ],
          icon: 'ğŸ“œ',
        },
        {
          id: 'samnite_ancestral_wrath',
          name: 'Ancestral Wrath',
          description: 'Ultimate: Power of Samnite ancestors',
          branch: 'offense',
          tier: 5,
          prerequisite: 'samnite_warrior_tradition',
          effects: [
            { stat: 'damage', value: 50, isPercentage: true },
            { stat: 'critChance', value: 25, isPercentage: true },
          ],
          icon: 'ğŸ‘»',
        },
      ],
      defense: [
        {
          id: 'samnite_heavy_armor',
          name: 'Heavy Armor',
          description: 'Full Samnite armor protection',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'damageReduction', value: 20, isPercentage: true }],
          icon: 'ğŸ›¡ï¸',
        },
        {
          id: 'samnite_tower_shield',
          name: 'Tower Shield',
          description: 'Large scutum provides cover',
          branch: 'defense',
          tier: 2,
          prerequisite: 'samnite_heavy_armor',
          effects: [{ stat: 'blockChance', value: 25, isPercentage: true }],
          icon: 'ğŸ°',
        },
        {
          id: 'samnite_stalwart',
          name: 'Stalwart',
          description: 'Unmovable in combat',
          branch: 'defense',
          tier: 3,
          prerequisite: 'samnite_tower_shield',
          effects: [{ stat: 'knockbackResistance', value: 50, isPercentage: true }],
          icon: 'â›°ï¸',
        },
        {
          id: 'samnite_last_stand',
          name: 'Last Stand',
          description: 'Fight harder when wounded',
          branch: 'defense',
          tier: 4,
          prerequisite: 'samnite_stalwart',
          effects: [{ stat: 'damageReduction', value: 30, isPercentage: true, condition: 'when below 25% HP' }],
          icon: 'ğŸ”¥',
        },
        {
          id: 'samnite_iron_fortress',
          name: 'Iron Fortress',
          description: 'Ultimate: Impenetrable defense',
          branch: 'defense',
          tier: 5,
          prerequisite: 'samnite_last_stand',
          effects: [
            { stat: 'damageReduction', value: 50, isPercentage: true },
            { stat: 'blockChance', value: 40, isPercentage: true },
          ],
          icon: 'ğŸ›ï¸',
        },
      ],
      utility: [
        {
          id: 'samnite_tribal_pride',
          name: 'Tribal Pride',
          description: 'Samnite heritage boosts morale',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'morale', value: 15, isPercentage: false }],
          icon: 'ğŸ¦…',
        },
        {
          id: 'samnite_endurance_training',
          name: 'Endurance Training',
          description: 'Mountain warriors have great stamina',
          branch: 'utility',
          tier: 2,
          prerequisite: 'samnite_tribal_pride',
          effects: [{ stat: 'maxStamina', value: 20, isPercentage: true }],
          icon: 'ğŸ”ï¸',
        },
        {
          id: 'samnite_feared_enemy',
          name: 'Feared Enemy',
          description: 'Rome\'s old enemy inspires fear',
          branch: 'utility',
          tier: 3,
          prerequisite: 'samnite_endurance_training',
          effects: [{ stat: 'enemyMorale', value: -15, isPercentage: true }],
          icon: 'ğŸ˜±',
        },
        {
          id: 'samnite_historic_rivalry',
          name: 'Historic Rivalry',
          description: 'Crowds love the ancient enemy',
          branch: 'utility',
          tier: 4,
          prerequisite: 'samnite_feared_enemy',
          effects: [{ stat: 'fameGain', value: 25, isPercentage: true }],
          icon: 'âš”ï¸',
        },
        {
          id: 'samnite_legend_of_war',
          name: 'Legend of War',
          description: 'Ultimate: Become a living legend',
          branch: 'utility',
          tier: 5,
          prerequisite: 'samnite_historic_rivalry',
          effects: [
            { stat: 'allStats', value: 10, isPercentage: true },
            { stat: 'survivalChance', value: 30, isPercentage: true },
          ],
          icon: 'ğŸ‘‘',
        },
      ],
    },
  },

  velitus: {
    classId: 'velitus',
    branches: {
      offense: [
        {
          id: 'velitus_javelin_throw',
          name: 'Javelin Throw',
          description: 'Deadly accuracy with thrown weapons',
          branch: 'offense',
          tier: 1,
          effects: [{ stat: 'rangedDamage', value: 20, isPercentage: true }],
          icon: 'ğŸ¯',
        },
        {
          id: 'velitus_piercing_shot',
          name: 'Piercing Shot',
          description: 'Javelins penetrate armor',
          branch: 'offense',
          tier: 2,
          prerequisite: 'velitus_javelin_throw',
          effects: [{ stat: 'armorPenetration', value: 30, isPercentage: true }],
          icon: 'ğŸ“',
        },
        {
          id: 'velitus_rapid_volley',
          name: 'Rapid Volley',
          description: 'Throw multiple javelins quickly',
          branch: 'offense',
          tier: 3,
          prerequisite: 'velitus_piercing_shot',
          effects: [{ stat: 'rangedAttackSpeed', value: 30, isPercentage: true }],
          icon: 'âš¡',
        },
        {
          id: 'velitus_crippling_throw',
          name: 'Crippling Throw',
          description: 'Javelins slow and weaken targets',
          branch: 'offense',
          tier: 4,
          prerequisite: 'velitus_rapid_volley',
          effects: [
            { stat: 'slowChance', value: 40, isPercentage: true },
            { stat: 'weakenChance', value: 30, isPercentage: true },
          ],
          icon: 'ğŸ¦µ',
        },
        {
          id: 'velitus_rain_of_death',
          name: 'Rain of Death',
          description: 'Ultimate: Deadly javelin barrage',
          branch: 'offense',
          tier: 5,
          prerequisite: 'velitus_crippling_throw',
          effects: [
            { stat: 'rangedDamage', value: 60, isPercentage: true },
            { stat: 'multiShot', value: 3, isPercentage: false },
          ],
          icon: 'â˜”',
        },
      ],
      defense: [
        {
          id: 'velitus_light_armor',
          name: 'Light Armor',
          description: 'Mobility over protection',
          branch: 'defense',
          tier: 1,
          effects: [{ stat: 'evasion', value: 20, isPercentage: true }],
          icon: 'ğŸƒ',
        },
        {
          id: 'velitus_quick_dodge',
          name: 'Quick Dodge',
          description: 'Sidestep incoming attacks',
          branch: 'defense',
          tier: 2,
          prerequisite: 'velitus_light_armor',
          effects: [{ stat: 'dodgeChance', value: 15, isPercentage: true }],
          icon: 'ğŸ’¨',
        },
        {
          id: 'velitus_keep_distance',
          name: 'Keep Distance',
          description: 'Maintain safe range from enemies',
          branch: 'defense',
          tier: 3,
          prerequisite: 'velitus_quick_dodge',
          effects: [{ stat: 'meleeEvasion', value: 25, isPercentage: true }],
          icon: 'ğŸ“',
        },
        {
          id: 'velitus_escape_artist',
          name: 'Escape Artist',
          description: 'Slip away from dangerous situations',
          branch: 'defense',
          tier: 4,
          prerequisite: 'velitus_keep_distance',
          effects: [{ stat: 'disengageChance', value: 50, isPercentage: true }],
          icon: 'ğŸª',
        },
        {
          id: 'velitus_wind_walker',
          name: 'Wind Walker',
          description: 'Ultimate: Move like the wind',
          branch: 'defense',
          tier: 5,
          prerequisite: 'velitus_escape_artist',
          effects: [
            { stat: 'evasion', value: 40, isPercentage: true },
            { stat: 'movementSpeed', value: 30, isPercentage: true },
          ],
          icon: 'ğŸŒ¬ï¸',
        },
      ],
      utility: [
        {
          id: 'velitus_scout_training',
          name: 'Scout Training',
          description: 'Velites serve as army scouts',
          branch: 'utility',
          tier: 1,
          effects: [{ stat: 'initiativeBonus', value: 20, isPercentage: true }],
          icon: 'ğŸ‘ï¸',
        },
        {
          id: 'velitus_harassment_tactics',
          name: 'Harassment Tactics',
          description: 'Frustrate and demoralize enemies',
          branch: 'utility',
          tier: 2,
          prerequisite: 'velitus_scout_training',
          effects: [{ stat: 'enemyAccuracy', value: -15, isPercentage: true }],
          icon: 'ğŸ˜¤',
        },
        {
          id: 'velitus_javelin_recovery',
          name: 'Javelin Recovery',
          description: 'Retrieve thrown javelins',
          branch: 'utility',
          tier: 3,
          prerequisite: 'velitus_harassment_tactics',
          effects: [{ stat: 'ammoRecovery', value: 50, isPercentage: true }],
          icon: 'ğŸ”„',
        },
        {
          id: 'velitus_hit_and_run',
          name: 'Hit and Run',
          description: 'Attack while retreating',
          branch: 'utility',
          tier: 4,
          prerequisite: 'velitus_javelin_recovery',
          effects: [{ stat: 'retreatDamage', value: 50, isPercentage: true }],
          icon: 'ğŸƒ',
        },
        {
          id: 'velitus_shadow_hunter',
          name: 'Shadow Hunter',
          description: 'Ultimate: Unseen predator',
          branch: 'utility',
          tier: 5,
          prerequisite: 'velitus_hit_and_run',
          effects: [
            { stat: 'firstStrikeDamage', value: 100, isPercentage: true },
            { stat: 'critChance', value: 30, isPercentage: true },
          ],
          icon: 'ğŸŒ‘',
        },
      ],
    },
  },
};

// Helper function to get skill by ID
export const getSkillById = (skillId: string): Skill | undefined => {
  // Check universal skills
  const universalSkill = UNIVERSAL_SKILLS.find(s => s.id === skillId);
  if (universalSkill) return universalSkill;

  // Check class skills
  for (const tree of Object.values(CLASS_SKILL_TREES)) {
    for (const branch of Object.values(tree.branches)) {
      const skill = branch.find(s => s.id === skillId);
      if (skill) return skill;
    }
  }

  return undefined;
};

// Helper to get all skills for a class (including universal)
export const getClassSkills = (classId: GladiatorClass): Skill[] => {
  const classTree = CLASS_SKILL_TREES[classId];
  const classSkills = [
    ...classTree.branches.offense,
    ...classTree.branches.defense,
    ...classTree.branches.utility,
  ];
  return [...UNIVERSAL_SKILLS, ...classSkills];
};

// Helper to check if a skill can be learned
export const canLearnSkill = (
  skillId: string,
  learnedSkills: string[],
  availablePoints: number
): { canLearn: boolean; reason?: string } => {
  const skill = getSkillById(skillId);
  if (!skill) return { canLearn: false, reason: 'Skill not found' };
  
  if (learnedSkills.includes(skillId)) {
    return { canLearn: false, reason: 'Already learned' };
  }

  if (availablePoints < 1) {
    return { canLearn: false, reason: 'No skill points available' };
  }

  if (skill.prerequisite && !learnedSkills.includes(skill.prerequisite)) {
    const prereqSkill = getSkillById(skill.prerequisite);
    return { 
      canLearn: false, 
      reason: `Requires: ${prereqSkill?.name || skill.prerequisite}` 
    };
  }

  return { canLearn: true };
};
